@page "/ueber"

@inject AccessService AccessService
@inject IJSRuntime JSRuntime
@inject IBlazorCurrentDeviceService CurrentDevice

<div class="page-wrapper">
    <Background/>

    <!-- About us section -->
    <div class="card page-container" id="aboutUsSection">
        <div class="@(IsMobile ? "page-card-frosted" : "card-body page-card-frosted")">
            <AboutUs/>
        </div>
    </div>

    <!-- About Grid section -->
    <div class="card page-container mt-4" id="aboutUsGridSection">
        <div class="@(IsMobile ? "page-card-frosted" : "card-body page-card-frosted")">
            <AboutUsGrid @bind-IsMeetingPhaseVisible="meetingPhaseVisible"
                         @bind-IsRelationshipPhaseVisible="relationshipPhaseVisible"
                         @bind-IsProposalPhaseVisible="proposalPhaseVisible"/>

        </div>
    </div>

    
    @* <!-- About the chapel section --> *@
    @* <div class="card about-container mt-5" id="aboutTheChapelSection"> *@
    @*     <div class="card-body about-card"> *@
    @*         <AboutTheChapel/> *@
    @*     </div> *@
    @* </div> *@
    @* *@
    @* <!-- About the factory section --> *@
    @* @if (AccessService.CurrentLevel >= AccessLevel.GuestInvited) *@
    @* { *@
    @* <div class="card about-container mt-5" id="aboutTheFactorySection"> *@
    @*     <div class="card-body about-card"> *@
    @*         <AboutTheFactory/> *@
    @*     </div> *@
    @* </div> *@
    @* } *@
</div>

@code {
    private bool meetingPhaseVisible;
    private bool relationshipPhaseVisible;
    private bool proposalPhaseVisible;
    private bool IsMobile { get; set; }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            IsMobile = await CurrentDevice.Mobile();
            await JSRuntime.InvokeVoidAsync("scrollToFragment");
            StateHasChanged();
        }
    }

}